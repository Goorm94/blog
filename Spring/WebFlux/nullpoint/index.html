<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NullPointException 원인, 예방 , 해결하기 | 강해지고 싶은 개발자</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="🚀 개발과 기술의 발자취 🚀">
    
    <link rel="preload" href="/blog/assets/css/0.styles.bbe4b17c.css" as="style"><link rel="preload" href="/blog/assets/js/app.6a063b68.js" as="script"><link rel="preload" href="/blog/assets/js/2.344f0399.js" as="script"><link rel="preload" href="/blog/assets/js/34.1969edba.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.19d23687.js"><link rel="prefetch" href="/blog/assets/js/11.e84cc11f.js"><link rel="prefetch" href="/blog/assets/js/12.807d144f.js"><link rel="prefetch" href="/blog/assets/js/13.b39d025b.js"><link rel="prefetch" href="/blog/assets/js/14.994afe1a.js"><link rel="prefetch" href="/blog/assets/js/15.79a8a10d.js"><link rel="prefetch" href="/blog/assets/js/16.80471c2e.js"><link rel="prefetch" href="/blog/assets/js/17.f72a6071.js"><link rel="prefetch" href="/blog/assets/js/18.aca6dfdd.js"><link rel="prefetch" href="/blog/assets/js/19.d234a366.js"><link rel="prefetch" href="/blog/assets/js/20.2de22c9d.js"><link rel="prefetch" href="/blog/assets/js/21.8b6ebe8a.js"><link rel="prefetch" href="/blog/assets/js/22.24110fec.js"><link rel="prefetch" href="/blog/assets/js/23.eaaae781.js"><link rel="prefetch" href="/blog/assets/js/24.f9edbaf7.js"><link rel="prefetch" href="/blog/assets/js/25.407af36f.js"><link rel="prefetch" href="/blog/assets/js/26.65d7c431.js"><link rel="prefetch" href="/blog/assets/js/27.955a97fb.js"><link rel="prefetch" href="/blog/assets/js/28.d6f63cd9.js"><link rel="prefetch" href="/blog/assets/js/29.62964f4d.js"><link rel="prefetch" href="/blog/assets/js/3.d0f99d74.js"><link rel="prefetch" href="/blog/assets/js/30.32d067f7.js"><link rel="prefetch" href="/blog/assets/js/31.4a3f1d2a.js"><link rel="prefetch" href="/blog/assets/js/32.3c3a0531.js"><link rel="prefetch" href="/blog/assets/js/33.7f51ebef.js"><link rel="prefetch" href="/blog/assets/js/35.bfe3663c.js"><link rel="prefetch" href="/blog/assets/js/36.5db2b1e9.js"><link rel="prefetch" href="/blog/assets/js/37.f11cd328.js"><link rel="prefetch" href="/blog/assets/js/4.b5c5d85a.js"><link rel="prefetch" href="/blog/assets/js/5.aedbb9bc.js"><link rel="prefetch" href="/blog/assets/js/6.7dd3e1f3.js"><link rel="prefetch" href="/blog/assets/js/7.82263de4.js"><link rel="prefetch" href="/blog/assets/js/8.f4df4e14.js"><link rel="prefetch" href="/blog/assets/js/9.5a7f81fb.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.bbe4b17c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.jpg" alt="강해지고 싶은 개발자" class="logo"> <span class="site-name can-hide">강해지고 싶은 개발자</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/Home/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dev" class="dropdown-title"><span class="title">Dev</span> <span class="arrow down"></span></button> <button type="button" aria-label="Dev" class="mobile-dropdown-title"><span class="title">Dev</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Front-end
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/JS/" class="nav-link">
  JS
</a></li></ul></li><li class="dropdown-item"><h4>
          Back-end
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Spring/" class="nav-link router-link-active">
  Spring
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/Infra/" class="nav-link">
  Infra
</a></div><div class="nav-item"><a href="/blog/CS/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/dev-report/" class="nav-link">
  개발일기
</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/Home/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dev" class="dropdown-title"><span class="title">Dev</span> <span class="arrow down"></span></button> <button type="button" aria-label="Dev" class="mobile-dropdown-title"><span class="title">Dev</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Front-end
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/JS/" class="nav-link">
  JS
</a></li></ul></li><li class="dropdown-item"><h4>
          Back-end
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Spring/" class="nav-link router-link-active">
  Spring
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/Infra/" class="nav-link">
  Infra
</a></div><div class="nav-item"><a href="/blog/CS/" class="nav-link">
  CS
</a></div><div class="nav-item"><a href="/blog/dev-report/" class="nav-link">
  개발일기
</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/Spring/" aria-current="page" class="sidebar-link">소개</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>WebFlux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Spring/WebFlux/nullpoint/" aria-current="page" class="active sidebar-link">NullPointException 원인, 예방 , 해결하기</a></li></ul></section></li><li><a href="/blog/Spring/JPA/" class="sidebar-link">JPA</a></li><li><a href="/blog/Spring/Spring/" class="sidebar-link">Spring</a></li><li><a href="/blog/Spring/SpringBoot/" class="sidebar-link">Spring Boot</a></li><li><a href="/blog/Spring/WebFlux/" aria-current="page" class="sidebar-link">WebFlux</a></li><li><a href="/blog/Spring/spring_version/" class="sidebar-link">스프링 버전별 차이</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nullpointexception-원인-예방-해결하기"><a href="#nullpointexception-원인-예방-해결하기" class="header-anchor">#</a> NullPointException 원인, 예방 , 해결하기</h1> <p>회사 업무 중 관리자 페이지를 개선하는 업무를 하던 중 오류가 나오게 되었습니다.</p> <p>저희는 WebFlux 기반의 서버를 구축하고 있는 상황입니다. 클라이언트 측으로 부터 데이터를 받아 정재하는 과정에서 이러한 NullPointException인 NPE 가 자주 발생하곤 하였습니다.</p> <ul><li>NullPointException의 문제는 디버깅이 어렵기 때문에 초기 설계에서부터 이러한 NullPoint를 예방할 수 있는 기반의 코드를 만들어 나가는  것이 중요합니다.</li></ul> <blockquote><p><strong>예방 및 해결 방법</strong></p></blockquote> <ol><li><p>null Parameter를 넘기지 말 것.</p> <ul><li>default 변수를 선언 해주어, 불필요한 null 체크를 없애자</li></ul></li> <li><p>null 여부 비교 처리 추가</p> <ul><li><p>default 변수를 선언하지 않았을 경우, null 여부를 체크하는 로직을 추가하자.</p></li> <li><p>문자열 비교시 equals 메서드를 사용하도록 하자 ( String은 자바에서 기본형이 아니기 떄문에 )</p> <ul><li>또한, equals 메서드 사용시 non-null String을 기준으로 비교할 필요가 있다. 혹은 Constants를 활용해보자</li></ul></li></ul></li> <li><p>toString 대신 valueOf 메소드를 활용하자</p> <ul><li>toString은 Null 을 거르지 못한다.</li></ul></li> <li><p>메소드 체이닝 (Method Chaining) 패턴 호출 자제하기</p> <ul><li>메소드 체이닝
<ul><li>Object.Method().Method().Method();</li></ul></li> <li>메소드 체이닝의 경우 디버깅이 어려운 문제가 있기 때문에 코드량은 줄일 수 있지만, 확실히 설계를 하는것이 중요하다.</li></ul></li> <li><p>Spring을 사용하고 있다면 @NotNull 사용해보자.</p> <ul><li>Null을 넘기지 않는 것이 중요하지만 Domain( DTO, model ) 에 @ NotNull 어노테이션을 지정해보자.</li> <li>NotNull을 베이스로 코딩할 경우 통일적으로 빈값인지만 확인하면 되기때문에 코드의 품질을 향상 시켜 줄 것이다.</li></ul></li> <li><p>자바 8 이상을 지원하는 경우 ( Spring 3.2 / 4.3 이상 )</p> <ul><li><p>Optional 을 활용 하자</p> <ul><li>Optional 이란 어떤 오브젝트의 Wrapper 오브젝트라고 생각하면 이해하기 쉽다.</li></ul> <h4 id="optional-empty"><a href="#optional-empty" class="header-anchor">#</a> Optional.empty()</h4> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> oP <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>oP<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Person</span> p <span class="token operator">=</span> oP<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;p exists &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre></div><p>위의 예제는 빈 Optional 클래스를 리턴한다. null을 할당하는 것과 비슷한 느낌이지만 다른 점은 Optional이라는 오브젝트가 생성되고 그 안의 Person이 null 이라는 것이다.  ( 단순히 모든 값이 null 일경우 레퍼런스 자체가 생성되지 않는다. ) 그렇기 때문에, isPresent() 라는 널값을 확인해 내부에 감싸진 오브젝트가 null 이면 false 반대면 true를 리턴하는 메소드를 사용 할 수 있다.</p> <h4 id="optional-of"><a href="#optional-of" class="header-anchor">#</a> Optional.of()</h4> <p>조금 더 실무적으로 Optional을 활용해 보자.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">maion</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> oP <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;값 할당&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="optional-ofnullable"><a href="#optional-ofnullable" class="header-anchor">#</a> Optional.ofNullable()</h4> <p>Optional.of는 내부 오브젝트가 null일 때 사용 할 수 없습니다. 내부에 들어가는 오브젝트의 null 여부가 확실치 않은 경우에는     Optional.ofNullable을 사용해 봅시다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> persons <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Op</span> <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token function">search</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 핵심</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>oP<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Person</span> p <span class="token operator">=</span> oP<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;p exists&quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Person</span> <span class="token function">serach</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Person</span> p <span class="token operator">:</span> persons<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> p<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Search는 같은 이름이 있는 경우를 찾는 메소드 지만, null값을 포함할 수 있기 때문에 이와 같이 ofNullable를 사용하도록 <strong>합니다</strong></p> <h4 id="orelse"><a href="#orelse" class="header-anchor">#</a> orElse()</h4> <p>search 메서드를 이용해 검색을 했는데 null 일 경우 새로운 오브젝트를 만들고 싶다고 가정해보자. 그럴때는 orElse를 사용 할 수 있습니다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;hamjjang&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token function">serach</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; p exists &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>name<span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Optional<Person>  대신 Person을 사용 할 수 있게 되었다. 뒤의 Optional.ofNullable 부분이 Person을 반드시 리턴하기 대문임. 내부의 오브젝트가 존재하면 그 오브젝트를 리턴하면 그게 아니라면 orElse에서 새로운 오브젝트를 만들어 리턴하기 떄문이다. 원래라면 null이라면 null을 리턴한다.</Person></li> <li>Optional<Person>이 사라졌고 p는 반드시 nuill이 아니기 때문에 isPresent 나 null체크를 할 필요가 없어졌다.</Person></li></ul> <h4 id="orelseget"><a href="#orelseget" class="header-anchor">#</a> OrElseGet()</h4> <p>orElse가 아니라 orElseGet을 사용하는 방법도 있다. 예를들어 new Person을 만드는 곳이 다른 메서드에 있다고 해보자.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;hamjjang&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token function">serach</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span> <span class="token function">createPerson</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p>람다 함수 ( lambda function ) Supplier를 인풋으로 받는다.</p> <h4 id="orelse-vs-orelseget"><a href="#orelse-vs-orelseget" class="header-anchor">#</a> orElse vs orElseGet</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;orElseGet&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">createPerson</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;p exists &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>name<span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Person</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;CreatePerson 메서드 안&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>orElseGet을 사용할 경우 에로우 펑션을 사용하기 때문에 객체가 생성되지 않는다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;orELse&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token function">createPerson</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;p exists &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Person</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;메소드 생성&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>orElse의 경우 메소드를 따로 지정했기 때문에 null 여부에 관계없이 실행 되어 진다.</p> <h4 id="orelsethrow"><a href="#orelsethrow" class="header-anchor">#</a> orElseThrow()</h4> <p>null을 절대 허용하지 않을 경우 null이 넘어오는 경우 예외를 발생시킬 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;p exists &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomethingOnPerson</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Person</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Spring/" class="prev router-link-active">
        소개
      </a></span> <span class="next"><a href="/blog/Spring/JPA/">
        JPA
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.6a063b68.js" defer></script><script src="/blog/assets/js/2.344f0399.js" defer></script><script src="/blog/assets/js/34.1969edba.js" defer></script>
  </body>
</html>
